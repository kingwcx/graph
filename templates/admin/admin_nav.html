<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>后台管理页面</title>

    <link href="{% static 'admin/css/bootstrap.min.css' %}" rel="stylesheet">
    <link href="{% static 'admin/font-awesome/css/font-awesome.css' %}" rel="stylesheet">

    <!-- Toastr style -->
    <link href="{% static 'admin/css/plugins/toastr/toastr.min.css' %}" rel="stylesheet">

    <!-- Gritter -->
    <link href="{% static 'admin/js/plugins/gritter/jquery.gritter.css' %}" rel="stylesheet">

    <link href="{% static 'admin/css/animate.css' %}" rel="stylesheet">
    <link href="{% static 'admin/css/style.css' %}" rel="stylesheet">

    <!-- blueimp gallery -->
    <link rel="stylesheet" href="{% static 'admin/css/plugins/blueimp/css/blueimp-gallery.min.css' %}"

    <!-- cytoscape -->
    <script src="{% static 'cytoscape/cytoscape.min.js' %}"></script>

    <!-- Mainly scripts -->
    <script src="{% static 'admin/js/jquery-3.1.1.min.js' %}"></script>
    <script src="{% static 'admin/js/bootstrap.js' %}"></script>
    <script src="{% static 'admin/js/popper.min.js' %}"></script>
    <script src="{% static 'admin/js/plugins/metisMenu/jquery.metisMenu.js' %}"></script>
    <script src="{% static 'admin/js/plugins/slimscroll/jquery.slimscroll.min.js' %}"></script>

    <!-- blueimp gallery -->
    <script src="{% static 'admin/js/plugins/blueimp/jquery.blueimp-gallery.min.js' %}"></script>

    <!-- input image-->
    <link rel="stylesheet" href="{% static '/input/css/fileinput.css' %}" />
    <script src="{% static '/input/js/fileinput.js' %}" type="text/javascript"></script>
    <script src="{% static '/input/js/fileinput_locale_zh.js' %}" type="text/javascript"></script>

    <style type="text/css">
        .table tbody tr td{
            vertical-align:middle;
            text-align: center;
        }
    </style>
</head>
</head>

<body>
    <div id="wrapper">
        <nav class="navbar-default navbar-static-side" role="navigation">
            <div class="sidebar-collapse">
                <ul class="nav metismenu" id="side-menu">
                    <li class="nav-header">
                        <div class="dropdown profile-element">
                            <img alt="image" class="rounded-circle" src="{% static 'admin/img/profile_small.jpg' %}"/>
                            <a data-toggle="dropdown" class="dropdown-toggle" href="#">
                                <span class="block m-t-xs font-bold">{{ request.user.username }}</span>
                                <span class="text-muted text-xs block">菜单 <b class="caret"></b></span>
                            </a>
                            <ul class="dropdown-menu animated fadeInRight m-t-xs">
                                <li><a class="dropdown-item" href="">个人中心</a></li>
                                <li><a class="dropdown-item" href="">消息中心</a></li>
                                <li class="dropdown-divider"></li>
                                <li><a class="dropdown-item" href="{% url 'admin:logout' %}">注销</a></li>
                            </ul>
                        </div>
                        <div class="logo-element">
                            DE+
                        </div>
                    </li>
                    <li>
                        <a href="{% url 'admin:home' %}">
                            <i class="fa fa-diamond"></i> <span class="nav-label">首页</span>
                        </a>
                    </li>
                    <li>
                        <a href="../index/index.html"><i class="fa fa-th-large"></i> <span class="nav-label">知识图谱</span> <span class="fa arrow"></span></a>
                        <ul class="nav nav-second-level">
                            <!--li><a href="{% url 'admin:knowledge_graph' %}">节点展示</a></li-->
                            <li><a href="{% url 'admin:search_node' %}">节点搜索</a></li>
                            <li><a href="{% url 'admin:add_node_view' %}">添加节点</a></li>
                            <li><a href="{% url 'admin:add_relationship_view' %}">添加关系</a></li>
                        </ul>
                    </li>
                    <li>
                        <a href="../index/index.html"><i class="fa fa-th-large"></i> <span class="nav-label">用户管理</span> <span class="fa arrow"></span></a>
                        <ul class="nav nav-second-level">
                            <li><a href="{% url 'admin:user_list' %}">用户展示</a></li>
                            <li><a href="{% url 'admin:user_list' %}">用户认证</a></li>
                        </ul>
                    </li>
                    <li>
                        <a href="../index/index.html"><i class="fa fa-th-large"></i> <span class="nav-label">审核管理</span> <span class="fa arrow"></span></a>
                        <ul class="nav nav-second-level">
                            <li><a href="{% url 'admin:verify' %}">众包审核</a></li>
                        </ul>
                    </li>

                </ul>
            </div>
        </nav>

        <div id="page-wrapper" class="gray-bg dashbard-1">
            <div class="row border-bottom">
                <nav class="navbar navbar-static-top" role="navigation" style="margin-bottom: 0">
                    <div class="navbar-header">
                        <a class="navbar-minimalize minimalize-styl-2 btn btn-primary " href="#">
                            <i class="fa fa-bars"></i>
                        </a>
                    </div>
                    <ul class="nav navbar-top-links navbar-right">
                        <li style="padding: 20px">
                            <span class="m-r-sm text-muted welcome-message">欢迎来到后台管理员页面.</span>
                        </li>
                        <li class="dropdown">
                            <a class="dropdown-toggle count-info" data-toggle="dropdown" href="#">
                                <i class="fa fa-envelope"></i>  <span id="message_number" class="label label-warning"></span>
                            </a>
                            <ul class="dropdown-menu dropdown-messages dropdown-menu-right">
                                <li>
                                    <div class="dropdown-messages-box">
                                        <div id="message_number2">
                                            <i class="fa fa-envelope fa-fw"></i> 你有0条消息未处理
                                            <span class="float-right text-muted small">4 minutes ago</span>
                                        </div>
                                    </div>
                                </li>
                                <li class="dropdown-divider"></li>
                                <li>
                                    <div class="text-center link-block">
                                        <a href="{% url 'admin:verify' %}" class="dropdown-item">
                                            <i class="fa fa-envelope"></i> <strong>查看所有消息</strong>
                                        </a>
                                    </div>
                                </li>
                            </ul>
                        </li>


                        <li>
                            <a href="{% url 'admin:logout' %}">
                                <i class="fa fa-sign-out"></i> 注销
                            </a>
                        </li>
                        <li>
                            <a class="right-sidebar-toggle">
                                <i class="fa fa-tasks"></i>
                            </a>
                        </li>
                    </ul>

                </nav>
            </div>
            <div class="row">
                <div class="col-lg-12">
                    <div class="wrapper wrapper-content">
                        {% block content %}
                        {% endblock %}
                    </div>

                </div>
            </div>
            <div class="footer">
                <div class="float-right">
                     <strong>东华大学毕业设计</strong>
                </div>
                <div>
                    <strong>Copyright</strong> 151330106王晨曦
                </div>
            </div>
        </div>

        <div id="right-sidebar" class="animated">
            <div class="sidebar-container">

                <ul class="nav nav-tabs navs-3">
                    <li>
                        <a class="nav-link active" data-toggle="tab" href="#tab-1"> 提醒 </a>
                    </li>
                    <li>
                        <a class="nav-link" data-toggle="tab" href="#tab-2"> 其他 </a>
                    </li>
                    <li>
                        <a class="nav-link" data-toggle="tab" href="#tab-3"> <i class="fa fa-gear"></i> </a>
                    </li>
                </ul>

                <div class="tab-content">
                    <div id="tab-1" class="tab-pane active">
                        <div class="sidebar-title">
                            <h3> <i class="fa fa-comments-o"></i> 最新消息</h3>
                            <small><i class="fa fa-tim"></i> 你有10条新消息.</small>
                        </div>
                        <div>
                            <div class="sidebar-message">
                                <a href="#">
                                    <div class="float-left text-center">
                                        <img alt="image" class="rounded-circle message-avatar" src="{% static 'admin/img/a4.jpg' %}">
                                    </div>
                                    <div class="media-body">
                                        这是一个还未完成的测试页面，可以添加许多新功能。
                                        <br>
                                        <small class="text-muted">2019/5/14 2:00PM</small>
                                    </div>
                                </a>
                            </div>
                        </div>
                    </div>

                    <div id="tab-2" class="tab-pane">
                        <div class="sidebar-title">
                            <h3> <i class="fa fa-cube"></i> 测试</h3>
                            <small><i class="fa fa-tim"></i> 你有10项待测任务.</small>
                        </div>
                        <ul class="sidebar-list">
                            <li>
                                <a href="#">
                                    <div class="small float-right m-t-xs">2 小时前</div>
                                    <h4>调试</h4>
                                    去实验室117调试你的系统.

                                    <div class="small">完成进度: 14%</div>
                                    <div class="progress progress-mini">
                                        <div style="width: 14%;" class="progress-bar progress-bar-info"></div>
                                    </div>
                                </a>
                            </li>
                        </ul>
                    </div>

                    <div id="tab-3" class="tab-pane">
                        <div class="sidebar-title">
                            <h3><i class="fa fa-gears"></i> 设置</h3>
                            <small><i class="fa fa-tim"></i> 快速设置页面（未完成）</small>
                        </div>
                        <div class="setings-item">
                            <span>
                                加速模式
                            </span>
                            <div class="switch">
                                <div class="onoffswitch">
                                    <input type="checkbox" name="collapsemenu" checked class="onoffswitch-checkbox" id="example2">
                                    <label class="onoffswitch-label" for="example2">
                                        <span class="onoffswitch-inner"></span>
                                        <span class="onoffswitch-switch"></span>
                                    </label>
                                </div>
                            </div>
                        </div>

                    </div>

                </div>
            </div>
        </div>

    </div>

    <!-- Flot -->
    <script src="{% static 'admin/js/plugins/flot/jquery.flot.js' %}"></script>
    <script src="{% static 'admin/js/plugins/flot/jquery.flot.tooltip.min.js' %}"></script>
    <script src="{% static 'admin/js/plugins/flot/jquery.flot.spline.js' %}"></script>
    <script src="{% static 'admin/js/plugins/flot/jquery.flot.resize.js' %}"></script>
    <script src="{% static 'admin/js/plugins/flot/jquery.flot.pie.js' %}"></script>

    <!-- Peity -->
    <script src="{% static 'admin/js/plugins/peity/jquery.peity.min.js' %}"></script>
    <script src="{% static 'admin/js/demo/peity-demo.js' %}"></script>

    <!-- Custom and plugin javascript -->
    <script src="{% static 'admin/js/inspinia.js' %}"></script>
    <script src="{% static 'admin/js/plugins/pace/pace.min.js' %}"></script>

    <!-- jQuery UI -->
    <script src="{% static 'admin/js/plugins/jquery-ui/jquery-ui.min.js' %}"></script>

    <!-- GITTER -->
    <script src="{% static 'admin/js/plugins/gritter/jquery.gritter.min.js' %}"></script>

    <!-- Sparkline -->
    <script src="{% static 'admin/js/plugins/sparkline/jquery.sparkline.min.js' %}"></script>

    <!-- Sparkline demo data  -->
    <script src="{% static 'admin/js/demo/sparkline-demo.js' %}"></script>

    <!-- ChartJS-->
    <script src="{% static 'admin/js/plugins/chartJs/Chart.min.js' %}"></script>

    <!-- Toastr -->
    <script src="{% static 'admin/js/plugins/toastr/toastr.min.js' %}"></script>
    <script>
        $(document).ready(function(){
            GetMmessage();
        });
        function GetMmessage(){
            $.post("{% url 'admin:get_info' %}",function(data){
                if(data.nodes.length>0){
                    $("#message_number").text(data.nodes.length);
                    $("#message_number2").text("你有"+data.nodes.length+"条消息未处理");
                }else{
                    $("#message_number").text("");
                    $("#message_number2").text("");
                }
                for(i=0;i<data.nodes.length;i++) {

                }
            });
        }
    </script>
    <script>
        //获得get传参
         String.prototype.GetValue= function(parm) {
           var reg = new RegExp("(^|&)"+ parm +"=([^&]*)(&|$)");
           var r = this.substr(this.indexOf("\?")+1).match(reg);
           if (r!=null) return decodeURI(r[2]); return null;
         };
        $(document).ready(function() {
            setTimeout(function () {
                toastr.options = {
                    closeButton: true,
                    progressBar: true,
                    showMethod: 'slideDown',
                    timeOut: 10000
                };
                var url = window.location.href;
                message = url.GetValue("message");
                console.log(message);
                if(message != undefined){
                    toastr.success(message, '操作成功！');
                }else{

                }

            }, 300);
        })
    </script>
</body>
</html>
